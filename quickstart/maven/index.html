
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-6.2.4">
    
    
      
        <title>Maven plugin - Liquigraph</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.75751829.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#maven-plugin" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Liquigraph" class="md-header-nav__button md-logo" aria-label="Liquigraph">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M205.22 22.09c-7.94-28.78-49.44-30.12-58.44 0C100.01 179.85 0 222.72 0 333.91 0 432.35 78.72 512 176 512s176-79.65 176-178.09c0-111.75-99.79-153.34-146.78-311.82zM176 448c-61.75 0-112-50.25-112-112 0-8.84 7.16-16 16-16s16 7.16 16 16c0 44.11 35.89 80 80 80 8.84 0 16 7.16 16 16s-7.16 16-16 16z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Liquigraph
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Maven plugin
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/liquibase/liquigraph/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    liquigraph
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Liquigraph" class="md-nav__button md-logo" aria-label="Liquigraph">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M205.22 22.09c-7.94-28.78-49.44-30.12-58.44 0C100.01 179.85 0 222.72 0 333.91 0 432.35 78.72 512 176 512s176-79.65 176-178.09c0-111.75-99.79-153.34-146.78-311.82zM176 448c-61.75 0-112-50.25-112-112 0-8.84 7.16-16 16-16s16 7.16 16 16c0 44.11 35.89 80 80 80 8.84 0 16 7.16 16 16s-7.16 16-16 16z"/></svg>

    </a>
    Liquigraph
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/liquibase/liquigraph/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    liquigraph
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../download/" class="md-nav__link">
      Download
    </a>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Quickstart
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Quickstart" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Quickstart
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../cli/" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Maven plugin
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Maven plugin
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    Basic concepts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-migrations" class="md-nav__link">
    First migrations
  </a>
  
    <nav class="md-nav" aria-label="First migrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-log-creation" class="md-nav__link">
    Change log creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-uri" class="md-nav__link">
    Connection URI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-minimal-pom-file" class="md-nav__link">
    A minimal POM file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dry-run" class="md-nav__link">
    Dry run
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    Run
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../spring-boot/" class="md-nav__link">
      Spring Boot
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../reference/" class="md-nav__link">
      Reference
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../2.x/" class="md-nav__link">
      [archive] 2.x manual
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    Basic concepts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-migrations" class="md-nav__link">
    First migrations
  </a>
  
    <nav class="md-nav" aria-label="First migrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-log-creation" class="md-nav__link">
    Change log creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-uri" class="md-nav__link">
    Connection URI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-minimal-pom-file" class="md-nav__link">
    A minimal POM file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dry-run" class="md-nav__link">
    Dry run
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    Run
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/liquibase/liquigraph/edit/master/docs/quickstart/maven.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="maven-plugin">Maven plugin<a class="headerlink" href="#maven-plugin" title="Permanent link">⚓</a></h1>
<p>Liquigraph provides a Maven plugin.
This plugin is a good fit for:</p>
<ul>
<li>standalone executions of Liquigraph in environments where <abbr title="Java Virtual Machine">JVM</abbr> tooling is already in place (like <abbr title="Continuous Integration">CI</abbr>/<abbr title="Continuous Deployment">CD</abbr> pipelines e.g.). You might want to have a look at the <a href="../cli/">Liquigraph <abbr title="Command Line Application">CLI</abbr></a> otherwise</li>
<li>the automation of migrations before some other Maven plugin executes (such as <a href="https://maven.apache.org/surefire/maven-failsafe-plugin/">Maven Failsafe Plugin</a> for integration tests)</li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">⚓</a></h2>
<p>Make sure a <abbr title="Java Development Kit">JDK</abbr> is set up on the machine running the Maven build.</p>
<p>For Neo4j 3.x, the minimal <abbr title="Java Development Kit">JDK</abbr> version is 8.</p>
<p>For Neo4j 4.x, the minimal <abbr title="Java Development Kit">JDK</abbr> version is 11.</p>
<p>You will also need to install a recent version of <a href="https://maven.apache.org/">Apache Maven</a>.</p>
<p>As a simple sanity check, <code>javac --version</code>, <code>java --version</code> and <code>mvn --version</code> should display the same <abbr title="Java Development Kit">JDK</abbr> version.</p>
<h2 id="basic-concepts">Basic concepts<a class="headerlink" href="#basic-concepts" title="Permanent link">⚓</a></h2>
<p>Liquigraph requires a single entry point, also known as a <strong>change log</strong> file.
This file can include other <strong>change log</strong> files and/or define <strong>change set</strong>s.</p>
<p>Every <strong>change set</strong> is executed in a separate transaction.
They define at least 1 <a href="https://neo4j.com/developer/cypher/">Cypher</a> query.
These Cypher queries define the data (or <a href="https://neo4j.com/docs/getting-started/current/cypher-intro/schema/">indices/constraints</a>) that will be created, modified or deleted from the target database.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Neo4j disallows mixing index/constraint with regular "data" operations within the same transaction. 
Such a transaction will always fail.
As a consequence, index/constraint operations must be defined in separate Liquigraph change sets.</p>
</div>
<p>Change sets are uniquely identified by their ID and author name.
By default, they also are:</p>
<ul>
<li>incremental: they are allowed to run only once.</li>
<li>immutable: their queries are not allowed to change.</li>
</ul>
<p>Learn how to change these defaults, and more, in the <a href="../../reference/">reference documentation</a>.</p>
<h2 id="first-migrations">First migrations<a class="headerlink" href="#first-migrations" title="Permanent link">⚓</a></h2>
<h3 id="change-log-creation">Change log creation<a class="headerlink" href="#change-log-creation" title="Permanent link">⚓</a></h3>
<p>Save the following change log file:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;changelog</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
           <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;https://www.liquigraph.org/schema/1.0/liquigraph.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;changeset</span> <span class="na">id=</span><span class="s">&quot;sentence-initialization&quot;</span> <span class="na">author=</span><span class="s">&quot;florent-biville&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;query&gt;</span>CREATE (n:Sentence {text:&quot;Hello monde!&quot;}) RETURN n<span class="nt">&lt;/query&gt;</span>
    <span class="nt">&lt;/changeset&gt;</span>
    <span class="nt">&lt;changeset</span> <span class="na">id=</span><span class="s">&quot;sentence-correction&quot;</span> <span class="na">author=</span><span class="s">&quot;florent-biville&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;query&gt;</span>MATCH (n:Sentence {text:&quot;Hello monde!&quot;}) SET n.text=&quot;Hello world!&quot; RETURN n<span class="nt">&lt;/query&gt;</span>
    <span class="nt">&lt;/changeset&gt;</span>
<span class="nt">&lt;/changelog&gt;</span>
</code></pre></div>
</td></tr></table>
<p>The change log defines two change sets, which are executed in order, in separate transactions:</p>
<ol>
<li>The first change set defines a single query, which creates a node, with a <code>Sentence</code> label and a simple textual property called <code>text</code>.</li>
<li>The second change set defines a single Cypher query as well, which finds the node pattern and updates the <code>text</code> property accordingly.</li>
</ol>
<p>If the Cypher syntax looks unfamiliar, feel free to follow <a href="https://neo4j.com/developer/cypher/guide-cypher-basics/">this official tutorial</a>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The location of this file will be called <code>CHANGELOG_FILE</code> throughout the rest of the tutorial.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Contrary to Liquibase, Liquigraph only supports <abbr title="Extensible Markup Language">XML</abbr> for defining change logs.</p>
</div>
<h3 id="connection-uri">Connection <abbr title="Uniform Resource Identifier">URI</abbr><a class="headerlink" href="#connection-uri" title="Permanent link">⚓</a></h3>
<p>To keep things simple, we will assume a standalone Neo4j server is running on your machine, 
via <a href="https://neo4j.com/download/">Neo4j Desktop</a> or <a href="https://hub.docker.com/_/neo4j">Docker</a> for instance.</p>
<p>The connection <abbr title="Uniform Resource Identifier">URI</abbr> will be <code>jdbc:neo4j:bolt://localhost</code>, username <code>neo4j</code> and the password <code>changeme</code>.</p>
<p>Depending on Neo4j versions, Neo4j server typology and Liquigraph client, connection <abbr title="Uniform Resource Identifier">URI</abbr> can vary greatly.
The configuration is covered in much greater details in the <a href="../../reference/">reference documentation</a>.</p>
<h2 id="a-minimal-pom-file">A minimal <abbr title="Project Object Model">POM</abbr> file<a class="headerlink" href="#a-minimal-pom-file" title="Permanent link">⚓</a></h2>
<p>For simplicity's sake, a standalone Maven build will be assumed.
If that's not the case, simply copy the relevant sections of the following file:</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Liquigraph 4.x</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;groupId&gt;</span>com.example<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>liquigraph-maven-example<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>

    <span class="nt">&lt;name&gt;</span>liquigraph-maven-example<span class="nt">&lt;/name&gt;</span>

    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
        <span class="nt">&lt;project.reporting.outputEncoding&gt;</span>${project.build.sourceEncoding}<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
        <span class="nt">&lt;maven.compiler.release&gt;</span>11<span class="nt">&lt;/maven.compiler.release&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.liquigraph<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>liquigraph-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>4.0.6<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;changelog&gt;</span>changelog.xml<span class="nt">&lt;/changelog&gt;</span>
                    <span class="nt">&lt;jdbcUri&gt;</span>jdbc:neo4j:bolt://localhost<span class="nt">&lt;/jdbcUri&gt;</span>
                    <span class="nt">&lt;username&gt;</span>neo4j<span class="nt">&lt;/username&gt;</span>
                    <span class="nt">&lt;password&gt;</span>changeme<span class="nt">&lt;/password&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">Liquigraph 3.x</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;groupId&gt;</span>com.example<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>liquigraph-maven-example<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>

    <span class="nt">&lt;name&gt;</span>liquigraph-maven-example<span class="nt">&lt;/name&gt;</span>

    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
        <span class="nt">&lt;project.reporting.outputEncoding&gt;</span>${project.build.sourceEncoding}<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
        <span class="nt">&lt;maven.compiler.source&gt;</span>8<span class="nt">&lt;/maven.compiler.source&gt;</span>
        <span class="nt">&lt;maven.compiler.target&gt;</span>${maven.compiler.source}<span class="nt">&lt;/maven.compiler.target&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.liquigraph<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>liquigraph-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>3.1.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;changelog&gt;</span>changelog.xml<span class="nt">&lt;/changelog&gt;</span>
                    <span class="nt">&lt;jdbcUri&gt;</span>jdbc:neo4j:bolt://localhost<span class="nt">&lt;/jdbcUri&gt;</span>
                    <span class="nt">&lt;username&gt;</span>neo4j<span class="nt">&lt;/username&gt;</span>
                    <span class="nt">&lt;password&gt;</span>changeme<span class="nt">&lt;/password&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Please refer to the <a href="../../download/#jvm">download section</a> to learn how to retrieve a Liquigraph <a href="https://maven.apache.org/guides/getting-started/index.html#What_is_a_SNAPSHOT_version">SNAPSHOT</a> version.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>CHANGELOG_FILE</code> should be stored in <code>src/main/resources/changelog.xml</code> for the example to work.</p>
</div>
<p>The following executions assumes that the current directory is the folder where <code>pom.xml</code>.</p>
<h2 id="dry-run">Dry run<a class="headerlink" href="#dry-run" title="Permanent link">⚓</a></h2>
<p>It is a good practice to first execute a dry run.</p>
<p>A dry run does not alter your database.
The database needs to be online, so that Liquigraph can properly detect
which change sets are to be selected (based on whether they already ran, whether they match the execution context ...).</p>
<p>It helps you make sure that:</p>
<ul>
<li>your connection settings are correct</li>
<li>the selected change sets are the ones you expect</li>
</ul>
<p>Since the configuration is defined in the <abbr title="Project Object Model">POM</abbr> file, the execution is simply as follows:</p>
<div class="highlight"><pre><span></span><code>mvn compile liquigraph:dry-run
</code></pre></div>
<p>This should result in a successful execution with a file named <code>output.cypher</code> in the generated <code>target</code> folder:</p>
<div class="highlight"><pre><span></span><code>less target/output.cypher
//Liquigraph changeset<span class="o">[</span>author: florent-biville, id: sentence-initialization<span class="o">]</span>
//Liquigraph changeset<span class="o">[</span>executionContexts: none declared<span class="o">]</span>
CREATE <span class="o">(</span>n:Sentence <span class="o">{</span>text:<span class="s2">&quot;Hello monde!&quot;</span><span class="o">})</span> RETURN n
//Liquigraph changeset<span class="o">[</span>author: florent-biville, id: sentence-correction<span class="o">]</span>
//Liquigraph changeset<span class="o">[</span>executionContexts: none declared<span class="o">]</span>
MATCH <span class="o">(</span>n:Sentence <span class="o">{</span>text:<span class="s2">&quot;Hello monde!&quot;</span><span class="o">})</span> SET n.text<span class="o">=</span><span class="s2">&quot;Hello world!&quot;</span> RETURN n
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>Contrary to Liquibase, Liquigraph only includes the queries of the matching change sets.
Cypher queries executed for Liquigraph internal purposes are not included.</li>
<li>Printing to the standard output is also currently unsupported.</li>
</ul>
</div>
<h2 id="run">Run<a class="headerlink" href="#run" title="Permanent link">⚓</a></h2>
<p>Once the dry run is successful, you can finally execute the migrations.</p>
<p>The invocation is very similar, only the plugin target goal changes:</p>
<div class="highlight"><pre><span></span><code>mvn compile liquigraph:run
</code></pre></div>
<p>You can then check the data has been added in Neo4j Browser with the following Cypher query:</p>
<div class="highlight"><pre><span></span><code><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">sentence</span><span class="p">:</span><span class="n">Sentence</span><span class="p">)</span><span class="w"> </span><span class="k">RETURN</span><span class="w"> </span><span class="n">sentence</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">text</span><span class="w"></span>
</code></pre></div>
<p>The result should be "Hello world!".</p>
<p>You can re-run the same Liquigraph command several times and observe that the graph remains unchanged.
In other words, the following Cypher query:</p>
<div class="highlight"><pre><span></span><code><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">sentence</span><span class="p">:</span><span class="n">Sentence</span><span class="p">)</span><span class="w"> </span><span class="k">RETURN</span><span class="w"> </span><span class="n">COUNT</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>... should indeed always return 1.</p>
<div class="admonition info">
<p class="admonition-title">Good to know</p>
<p>If you ever run a less specific Cypher query such as <code>MATCH (n) RETURN n</code>, you will see that more node and relationships
are returned.
This is normal: Liquigraph persists the change log history in the same database.
The change log history graph structure is covered in much more details in the <a href="../../reference/">reference documentation</a>. </p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../cli/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                CLI
              </div>
            </div>
          </a>
        
        
          <a href="../spring-boot/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Spring Boot
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>